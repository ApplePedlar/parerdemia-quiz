/**
 * ãƒ‘ãƒ¬ãƒ‡ãƒŸã‚¢å­¦åœ’ å¯®ç”Ÿè¨˜æ†¶ã‚²ãƒ¼ãƒ  - çµµæ–‡å­—ãƒãƒƒãƒ”ãƒ³ã‚°
 * 
 * ç‰¹æ®Šãªçµµæ–‡å­—ã‚„æ–°ã—ã„çµµæ–‡å­—ã®ã‚µãƒãƒ¼ãƒˆã‚’ç®¡ç†ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
 * è¡¨ç¤ºã«å•é¡ŒãŒã‚ã‚‹çµµæ–‡å­—ã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã€é©åˆ‡ãªã‚¯ãƒ©ã‚¹ã‚’é©ç”¨ã—ã¾ã™ã€‚
 */

// ç‰¹æ®Šè¡¨ç¤ºãŒå¿…è¦ãªçµµæ–‡å­—ã®ãƒãƒƒãƒ”ãƒ³ã‚°
const emojiMapping = {
    // ãƒ”ãƒ³ã‚¯ã®ãƒãƒ¼ãƒˆçµµæ–‡å­— (iOS 15.4ä»¥é™/Unicode 14.0)
    'ğŸ©·': { class: 'emoji-heart-pink' },
    
    // ä»–ã®ç‰¹æ®Šçµµæ–‡å­—ãŒã‚ã‚Œã°è¿½åŠ å¯èƒ½
    // 'çµµæ–‡å­—': { class: 'ã‚¯ãƒ©ã‚¹å' },
};

/**
 * ãƒ†ã‚­ã‚¹ãƒˆå†…ã®ç‰¹æ®Šçµµæ–‡å­—ã‚’é©åˆ‡ã«ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹é–¢æ•°
 * 
 * @param {string} text - å‡¦ç†ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ
 * @return {string} - ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—æ¸ˆã¿ã®ãƒ†ã‚­ã‚¹ãƒˆ
 */
function formatEmojis(text) {
    if (!text) return '';
    
    // ç™»éŒ²ã•ã‚ŒãŸçµµæ–‡å­—ã‚’å…¨ã¦å‡¦ç†
    Object.keys(emojiMapping).forEach(emoji => {
        const emojiData = emojiMapping[emoji];
        // å¯¾è±¡ã®çµµæ–‡å­—ã‚’è¦‹ã¤ã‘ã¦é©åˆ‡ãªã‚¯ãƒ©ã‚¹ã‚’æŒã¤spanã§å›²ã‚€
        const spanWrapper = `<span class="emoji ${emojiData.class}">${emoji}</span>`;
        text = text.replace(new RegExp(emoji, 'g'), spanWrapper);
    });
    
    return text;
}
